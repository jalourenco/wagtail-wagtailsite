{% extends "wagtailsite/base.html" %}
{% load wagtailsite_tags pageurl image_tags rich_text static %}
{% block content %}

        {% if blogs %}
             {% for blog in blogs %}
                <article class="post">
                        <header class="post-header">
                            <h2 class="post-title">{{ blog.title }}</h2>
                            <div class="post-authored">
                            {% with blog.author_snippets.all as authors %}
                                {% for author in authors %}
                                        <div class="authorimg authorimg__mini">
                                            {% if author.author_snippet.author_image %}
                                                {% image author.author_snippet.author_image width-45 %}
                                            {% else %}
                                                <img src="{% static "wagtailsite/images/wagtail-profile-image.png" %}" width="45">
                                            {% endif %}
                                        </div>
                                        <p>
                                            {{ author.author_snippet.author_name }}
                                            on {{ blog.date|date:"j F Y" }}
                                        </p>
                                {% endfor %}
                            {% endwith %}  
                            </div>     
                        </header>
                    <!--this content needs to be bought in via pjax from blog post-->
                    <div class="post-body">
                        <div class="">{{blog.body|richtext}}</div>
                    </div>    
                    <footer class="post-footer">
                        <hr>
                        <div class="author clearfix">
                            {% with blog.author_snippets.all as authors %}
                                {% for author in authors %}
                                    <div class="authorimg">
                                        {% if author.author_snippet.author_image %}
                                            {% image author.author_snippet.author_image width-200 %}
                                        {% else %}
                                            <img src="{% static "wagtailsite/images/wagtail-profile-image.png" %}" width="200">
                                        {% endif %}
                                    </div>    
                                    <div class="author-info">
                                        <h6 class="post-heading">About the author</h6>
                                        <p class="author-name">{{ author.author_snippet.author_name }}</p>
                                        <p class="author-title">{{ author.author_snippet.author_title }}</p>
                                        <p>{{ author.author_snippet.author_biog }}</p>
                                    </div>         
                                {% endfor %}
                            {% endwith %}
                        </div>
                    </footer>
                    <!--end pjax content--> 
                </article>    
            {% endfor %}

            {% if blogs.has_next %}
                <a class="btn pagination" href="?page={{ blogs.next_page_number }}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&{{ key }}={{ value }}{% endifnotequal %}{% endfor %}">Older</a>
            {% endif %}
        {% else %}
            <p>There are currently no blog posts</p>
        {% endif %}             
<script>

$( document ).ready(function() {
  $(".post-header").click(function () {

    
      if ($(this).next().css('display') == 'none') {
          $(".post-body").css('display', 'none');
          $(this).next().css('display', 'block');
          $(".post-header").removeClass('.post-header__active');
          $(this).addClass('post-header__active');
      } else {
          $(this).next().css('display', 'none');
          $(this).removeClass('post-header__active');
      }
      
      
//      if ($(this).hasClass('blurb-big')) {
//        $(".blurb").removeClass('blurb-big');
//      } else {
//        $(".blurb").removeClass('blurb-big');
//     $(this).addClass('blurb-big');
//      }
      
//      $(this).next().css('display','block');
      
      /* if ($(this).next().css('display') == 'none') {
          $(".blogpost-content").css('display', 'none');
          $(this).next().css('display', 'block');
      } else {
          $(this).next().css('display', 'none');
      } */
      
    });
    
     $("#hamburger").click(function () {
    if ($('#mobilenav').css('display') == 'none') {
          $("#mobilenav").css('display', 'block');
      } else {
          $('#mobilenav').css('display', 'none');
      }
    });
    
//    $("#hamburger").click(function () {
//    if ($('#mobilenav').css('margin-top') == '-200px') {
//          $("#mobilenav").css('margin-top', '0');
//      } else {
//          $('#mobilenav').css('margin-top', '-200px');
//      }
//    });
    
});

</script>
{% endblock %}





